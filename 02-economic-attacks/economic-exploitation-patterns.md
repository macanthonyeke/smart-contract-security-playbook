# Economic Exploitation Patterns in YieldCore

## 1. Title
Economic Exploitation Patterns in YieldCore

## 2. Overview
YieldCore has limited price-oracle exposure, but still presents important game-theoretic surfaces: timing around the 1-day reward cap, lock/penalty parameter governance, penalty recycling, and shared rewardPool depletion dynamics.

## 3. Attack Surface from Current Economics
- Reward accrual saturates after one day, independent of longer lock.
- Early unstake penalties are recycled into `rewardPool`.
- Reward solvency is first-come, first-served at claim time.
- Owner controls rates and penalties without delay.

These properties can create profitable timing and coordination strategies even without code-level bugs.

## 4. Function-by-Function Economic Review (All Public Functions)
1. `setLockParameters`: Can instantly reshape market incentives and user outcomes.
2. `fundRewardPool`: Owner funding cadence determines who can claim successfully.
3. `stake`: User can optimize entry timing relative to expected pool funding and cap window.
4. `calculateReward`: Cap at 1 day changes EV profile for longer lock participants.
5. `claimReward`: Race conditions: earlier claimers are advantaged when pool is scarce.
6. `unstake`: Penalty recycling can create redistributive loops between user cohorts.
7. `cleanUpExpiredStake`: Owner can stop stale reward expectations via lifecycle forcing.
8. `emergencyWithdraw`: During pause, users can retrieve principal, possibly causing liquidity shocks.
9. `withdrawExcessRewards`: Owner extraction during pause can weaken confidence and run dynamics.
10. `maxReward`: Reveals capped upside; users may optimize around this deterministic bound.
11. `getStakeCount`: Enables analytics for cohort behavior.
12. `getStake`: Enables per-position strategy tooling.
13. `getRewardsClaimed`: Helps optimize claim timing.
14. `getContractBalance`: Public solvency signal influencing user run behavior.
15. `pause`: Can shift system from reward game to principal-protection game.
16. `unpause`: Reopens claim race dynamics.

## 5. Timing Strategies Around 1-Day Cap
Potential strategy:
1. Stake amount in high-rate lock.
2. Wait until near 1-day cap where max reward is reached.
3. Time claim/unstake based on expected pool depth and owner actions.

Economic result:
- Lock duration beyond one day may not justify capital lock for rational users.
- Protocol may fail to induce desired long-term commitment.

## 6. Penalty Recycling Incentive Misalignment
Early unstake penalties increase `rewardPool`, benefitting remaining claimers.

Misalignment scenarios:
- Cohort A exits early and subsidizes Cohort B.
- Protocol appears “self-funding” short term while degrading user trust.
- Adversaries can coordinate stake/exit patterns to shift value between accounts.

Alternative:
- Route penalties to insurance treasury or burn/sink model, not direct reward subsidy.

## 7. Griefing and Depletion Scenarios
- **Claim-race griefing**: bots monitor pool and claim as soon as funded.
- **Pause/unpause opportunism**: actors reposition around admin actions.
- **Long-term depletion**: if rates exceed sustainable inflows, late users face claim failures.

A sustainable design should make expected future solvency verifiable, not discretionary.

## 8. Redesigning RewardPool for Emission Guarantees
Safer architecture:
1. Define deterministic emission schedule.
2. Track accrued liabilities continuously.
3. Enforce reserve ratio and auto-throttle new stake intake when undercollateralized.
4. Separate principal custody from emission treasury.

This transforms reward payout from opportunistic funding to policy-constrained issuance.

## 9. Design Improvements & Hardening Opportunities in YieldCore
### Weaknesses / limitations
- First-come payout priority under constrained rewardPool.
- Cap/lock mismatch can create poor long-term incentive alignment.
- Penalty recycling can hide structural underfunding.

### Alternative designs
1. **Epoch-based pro-rata distribution**
   - Everyone in epoch shares funded emissions proportionally.
2. **Escrowed reward commitments**
   - Pre-fund obligations for each accepted stake cohort.
3. **Dynamic rate controller**
   - Lower rates automatically when reserve ratio deteriorates.

### Tradeoffs
- **Gas:** higher accounting and epoch state.
- **Complexity:** more moving parts and parameterization.
- **UX:** less “fixed reward” simplicity.
- **Security/economic robustness:** significantly improved solvency predictability.

### Real DeFi grounding
- Emission controllers, reserve ratios, and gauge/epoch systems are common in mature incentive protocols because they bound insolvency risk and reduce exploitable timing asymmetry.

